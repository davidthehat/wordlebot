var log=function(message){if(verbose){console.log(message)}};var removeLetter=function(arr,letter){a=[];for(var i=0;i<arr.length;i++){if(!arr[i].includes(letter)){a.push(arr[i])}}return a};function isIsogram(str){return!/(.).*\1/.test(str)}var removeDoubleLetters=function(arr){r=[];for(var i=0;i<arr.length;i++){if(isIsogram(arr[i])){r=r.concat(arr[i])}}return r};var scoreString=function(word,dict){const s=word.split("");return s.map(x=>dict[x]).reduce((x,y)=>x+y)};var scoreArr=function(arr,dict){return arr.map(x=>scoreString(x,dict)).reduce((x,y)=>x+y)};var findBest=function(arr,dict){besti=0;bests=0;for(var i=0;i<arr.length;i++){score=scoreString(arr[i],dict);if(score>bests){bests=score;besti=i}}return arr[besti]};var update=function(i,guess,correct,present,absent){var notabsent=[];for(var j=0;j<5;j++){state=getState(i,j);if(state==="correct"){correct[j]=guess[j];notabsent=notabsent.concat(guess[j])}else if(state==="present"){if(present[guess[j]]==undefined){present[guess[j]]=[]}present[guess[j]]=present[guess[j]].concat(j);notabsent=notabsent.concat(guess[j])}}for(var j=0;j<5;j++){state=getState(i,j);if(state==="absent"&&!notabsent.includes(guess[j])){absent=absent.concat(guess[j])}else if(state==="absent"){if(present[guess[j]]==undefined){present[guess[j]]=[]}present[guess[j]]=present[guess[j]].concat(j)}}return[correct,present,absent]};var keyInDictionary=function(dictionary,key){for(var k in dictionary){if(k==key){return true}}return false};var wordPossible=function(word,correct,present,absent){for(var i=0;i<word.length;i++){if(correct[i]!=undefined&&word[i]!=correct[i]){return false}if(absent.includes(word[i])){return false}}for(var k in present){positions=present[k];if(!word.includes(k)){return false}for(var i=0;i<word.length;i++){if(positions.includes(i)&&word[i]==k){return false}}}return true};var updateWords=function(arr,correct,present,absent){returned=[];for(var i=0;i<arr.length;i++){if(wordPossible(arr[i],correct,present,absent)){returned=returned.concat(arr[i])}}return returned};var generateDictionary=function(words){var dict={};for(var i=0;i<words.length;i++){var w=words[i];for(var j=0;j<w.length;j++){if(dict[w[j]]==undefined){dict[w[j]]=0}dict[w[j]]+=1}}return dict};var removeGuessedWords=function(dict,words){let ret=JSON.parse(JSON.stringify(dict));for(var i=0;i<words.length;i++){var w=words[i];for(var j=0;j<w.length;j++){ret[w[j]]=0}}return ret};var simGradeGuess=function(word){var arr=Array(word.length).fill("absent");simWordCopy=simWord.split("");for(var i=0;i<word.length;i++){if(simWordCopy[i]==word[i]){arr[i]="correct";simWordCopy[i]="_"}}for(var i=0;i<word.length;i++){if(simWordCopy.includes(word[i])&&arr[i]!="correct"){arr[i]="present";for(var j=0;j<simWordCopy.length;j++){if(simWordCopy[j]==word[i]){simWordCopy[j]="_";break}}}}return arr};var simTypeGuess=function(word){simGuesses=simGuesses.concat([[[simGradeGuess(word)],word]])};var runSim=async function(multi){if(multi==undefined){multi=1}simMode=true;verbose=false;var errors=0;var errorArr=[];allWords=getWordlist();for(var i=0;i<getWordlist().length*multi;i++){simGuesses=[];simWord=getWordlist()[i];var final=await runGreedyDoubleElimination(allWords);if(final!=simWord){errors+=1;errorArr=errorArr.concat(simWord)}console.log(i)}return[errors,errorArr]};var getState=function(r,c){if(simMode){console.log(simGuesses);return simGuesses[r][0][c]}var board=document.getElementsByClassName("Board-module_board__jeoPS");return board[0].children[r].children[c].children[0].dataset["state"]};var key=function(letter){document.dispatchEvent(new KeyboardEvent("keydown",{key:letter,bubbles:true}))};var typeword=function(word){if(simMode){simTypeGuess(word);return}console.log(word);const arr=word.split("");arr.map(key);key("Enter")};var getJSURL=function(){return"https://www.nytimes.com/games-assets/v2/wordle.104e42d22ba0a911c628.js";let url1=window.location.href.match(/.*\//g);if(url1==null){throw"getJSURL returning null"}url1=url1[0];return url1+"main."+wordle.hash+".js"};var fetchWordsData=async function(){const{data}=await axios.get(getJSURL());wordsArray=data.match(/\[("[a-z]{5}",){200,}("[a-z]{5}")\]/g);wordsArray=wordsArray.map(x=>JSON.parse(x));wordsArray.sort((a,b)=>b.length-a.length)};var getWordlist=function(){return wordsArray[0]};var commonLetters={s:6665,e:6662,a:5990,o:4438,r:4158,i:3759,l:3371,t:3295,n:2952,u:2511,d:2453,y:2074,c:2028,p:2019,m:1976,h:1760,g:1644,b:1627,k:1505,f:1115,w:1039,v:694,z:434,j:291,x:288,q:112};async function runGreedy(arr,dict){var correct=[];var present={};var absent=[];var currWords=arr;var best;for(var i=0;i<6;i++){if(currWords.length!=1){best=findBest(removeDoubleLetters(currWords),dict)}else{best=findBest(currWords,dict)}if(best==undefined){best=findBest(currWords,dict)}if(best==undefined){best="ERROR"}log(best);typeword(best);if(!simMode){await new Promise(r=>setTimeout(r,3e3))}updated=update(i,best,correct,present,absent);correct=updated[0];present=updated[1];absent=updated[2];currWords=updateWords(currWords,correct,present,absent);log(updated);log(currWords);log(simGuesses)}return best}var runGreedyElimination=async function(arr){var correct=[];var present={};var absent=[];var currWords=arr;var noDouble=removeDoubleLetters(currWords);generatedCommonLetters=generateDictionary(getWordlist());for(var i=0;i<6;i++){if(currWords.length==1||i==5){typeword(currWords[0]);best=currWords[0];break}if(i==0){dict=generatedCommonLetters}else{dict=generateDictionary(currWords)}var best=findBest(noDouble,dict);log(best);typeword(best);if(!simMode){await new Promise(r=>setTimeout(r,3e3))}var updated=update(i,best,correct,present,absent);log(updated);correct=updated[0];present=updated[1];absent=updated[2];log(currWords);currWords=updateWords(currWords,correct,present,absent)}return best};var runGreedyDoubleElimination=async function(arr){var correct=[];var present={};var absent=[];var currWords=arr;var noDouble=removeDoubleLetters(currWords);var guessedWords=[];generatedCommonLetters=generateDictionary(getWordlist());console.log(generatedCommonLetters);for(var i=0;i<6;i++){if(currWords.length==1||i==5){log("short circut");typeword(currWords[0]);log("simGuesses"+simGuesses);return simGuesses}if(i==0){dict=generatedCommonLetters}else{dict=generateDictionary(currWords)}log(dict);log(guessedWords);var dict_t=removeGuessedWords(dict,guessedWords);if(!Object.values(dict_t).every(item=>item===0)){log("mod dict good");dict=dict_t}log(dict);log(dict_t);var best=findBest(noDouble,dict);log(best);typeword(best);guessedWords=guessedWords.concat(best);if(!simMode){await new Promise(r=>setTimeout(r,3e3))}var updated=update(i,best,correct,present,absent);correct=updated[0];present=updated[1];absent=updated[2];log(updated);currWords=updateWords(currWords,correct,present,absent);log(currWords)}return simGuesses};var main=async function(){simMode=false;if(typeof process==="object"){simMode=true}simGuesses=[];verbose=true;await fetchWordsData();var fullwordlist=getWordlist();console.log(fullwordlist);console.log("TEST");var final=await runGreedyDoubleElimination(fullwordlist);log(final);if(simMode){log(simWord)}return final};main();